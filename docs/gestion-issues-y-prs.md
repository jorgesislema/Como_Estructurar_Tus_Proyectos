# Gesti√≥n de Issues y Pull Requests: ¬°El Arte de Colaborar Sin Caos! üé≠

Imagina un taller mec√°nico üõ†Ô∏è. En uno, las √≥rdenes de trabajo son claras, las herramientas est√°n organizadas, las piezas para cada reparaci√≥n est√°n etiquetadas y los mec√°nicos se comunican eficientemente sobre qu√© est√°n haciendo. En otro... hay notas garabateadas por todas partes, herramientas perdidas, piezas mezcladas y nadie sabe qui√©n est√° arreglando qu√©. ¬øEn cu√°l preferir√≠as trabajar (o dejar tu coche)?

En el desarrollo de software colaborativo, las **Issues** (Incidencias, Tareas) y los **Pull Requests** (PRs) o **Merge Requests** (MRs) son nuestras √≥rdenes de trabajo, nuestras propuestas de cambio y nuestro principal canal de comunicaci√≥n t√©cnica. Gestionarlos de forma eficaz es fundamental para:

* **Claridad:** Saber qu√© hay que hacer, por qu√© y qui√©n lo est√° haciendo.
* **Eficiencia:** Evitar trabajo duplicado, facilitar las revisiones y acelerar la integraci√≥n.
* **Historial:** Tener un registro trazable de decisiones, discusiones y cambios.
* **Onboarding:** Ayudar a los nuevos miembros a entender el flujo de trabajo y el estado del proyecto.

Esta gu√≠a te dar√° las claves para convertir tu gesti√≥n de issues y PRs en un taller bien engrasado, ¬°no en un desguace!

## Gesti√≥n de Issues: M√°s Que Simples "Bugs" üé´

Las Issues son la unidad fundamental para rastrear trabajo y discusiones en el repositorio. Sirven para mucho m√°s que reportar errores:

* Reportes de Bugs üêõ
* Solicitudes de Nuevas Funcionalidades ‚ú®
* Tareas T√©cnicas (Refactorizaci√≥n, Actualizaci√≥n de Dependencias) ‚öôÔ∏è
* Mejoras de Documentaci√≥n üìö
* Preguntas y Discusiones ü§î

### Creando Issues Efectivas: ¬°No Nos Hagas Adivinar!

Una issue bien escrita ahorra tiempo y frustraci√≥n a todos.

* **T√≠tulo Claro y Conciso:** Resume el problema o la solicitud de forma que sea f√°cil de identificar en una lista.
    * *Malo:* "Error"
    * *Bueno:* "Error 500 al intentar guardar perfil sin email"
    * *Bueno:* "Feature: A√±adir opci√≥n de exportar a CSV en reporte de usuarios"
* **Descripci√≥n Detallada:** ¬°Aqu√≠ est√° la clave! Proporciona contexto:
    * **Para Bugs:**
        * *Pasos para Reproducir:* Claros y numerados. ¬°Indispensable!
        * *Comportamiento Esperado:* ¬øQu√© deber√≠a haber pasado?
        * *Comportamiento Actual:* ¬øQu√© pas√≥ en realidad? (Incluye mensajes de error *exactos* si los hay).
        * *Contexto:* Versi√≥n del software, navegador, OS, datos de prueba relevantes.
        * *Extras:* Screenshots, GIFs animados, logs (¬°sin datos sensibles!).
    * **Para Features:**
        * *Descripci√≥n:* ¬øQu√© funcionalidad se propone?
        * *Motivaci√≥n/Rationale:* ¬øPor qu√© es necesaria? ¬øQu√© problema resuelve?
        * *Propuesta (Opcional):* Ideas iniciales sobre la implementaci√≥n o UI.
        * *Criterios de Aceptaci√≥n (Opcional):* ¬øC√≥mo sabremos que est√° terminada y funciona?
* **Usa Plantillas de Issues (Issue Templates):** ¬°Altamente recomendado! GitHub/GitLab permiten crear plantillas (`.github/ISSUE_TEMPLATE/`) para guiar a los usuarios a proporcionar la informaci√≥n necesaria para bugs, features, etc. ¬°Facilita la vida a todos!
* **Etiquetas (Labels) Consistentes:** üè∑Ô∏è Clasifica las issues con etiquetas para facilitar el filtrado y la organizaci√≥n. Ejemplos: `bug`, `feature`, `documentation`, `enhancement`, `priority:high`, `area:backend`, `area:ui`, `status:needs-triage`, `good first issue`. ¬°Define un conjunto est√°ndar para tu equipo!
* **Asignados (Assignees):** üë§ Asigna la issue a la persona o equipo responsable de abordarla. Clarifica la propiedad.
* **Hitos (Milestones):** üéØ Agrupa issues relacionadas con un objetivo espec√≠fico (ej. "Lanzamiento V2.1", "Sprint Q3").
* **Vinculaci√≥n:** Enlaza issues relacionadas o PRs que resuelven la issue.

### Ciclo de Vida y Triaje

* **Ciclo B√°sico:** Open -> (Triaje) -> Accepted/Backlog -> In Progress -> Needs Review (cuando hay un PR) -> Closed/Done.
* **Triaje:** Proceso regular (diario, semanal) para revisar nuevas issues: verificar si son v√°lidas, a√±adir etiquetas, asignar prioridad/responsable, cerrar duplicados o inv√°lidas. ¬°Evita que las issues se conviertan en un agujero negro!

## Gesti√≥n de Pull Requests (PRs): Proponiendo Cambios con Estilo üöÄ

Los PRs (o MRs en GitLab) son el mecanismo para proponer cambios al c√≥digo base, facilitar la revisi√≥n por pares y asegurar que las integraciones sean seguras.

### Creando PRs Efectivas: ¬°Hazle la Vida F√°cil al Revisor!

Un buen PR es un regalo para tus compa√±eros. Uno malo... bueno, es una tarde de viernes arruinada. üò©

* **PRs Peque√±os y Enfocados:** ¬°La regla de oro! Un PR debe, idealmente, abordar **una sola issue** o un cambio l√≥gico cohesivo. Evita los "Monster PRs" que cambian cientos de archivos; son casi imposibles de revisar bien y tienen alto riesgo. Divide el trabajo grande en PRs m√°s peque√±os.
* **T√≠tulo Claro y Referencial:** Similar a las issues, resume el cambio. Incluye el n√∫mero de la issue que resuelve (ej. `Fix #123: Corrige validaci√≥n de email en registro`).
* **Descripci√≥n Detallada (¬°El Por Qu√©!):**
    * **Qu√©:** ¬øQu√© hace este PR?
    * **Por Qu√©:** ¬øPor qu√© es necesario este cambio? ¬øQu√© problema resuelve? **¬°Enlaza a la(s) issue(s) relevantes!** (`Closes #123`, `Refs #456`).
    * **C√≥mo (Opcional):** Breve explicaci√≥n de la soluci√≥n t√©cnica si no es obvia. Menciona decisiones de dise√±o importantes.
    * **Para UI:** Incluye screenshots o GIFs del antes y el despu√©s.
    * **C√≥mo Probarlo:** Instrucciones para que el revisor pueda verificar el cambio localmente si es necesario.
* **Usa Plantillas de PR (Pull Request Templates):** De nuevo, ¬°muy recomendado! Define una estructura (`.github/PULL_REQUEST_TEMPLATE.md`) con secciones clave (Descripci√≥n, Issue Vinculada, Checklist de QA, Notas para el Revisor) para asegurar que no falte informaci√≥n crucial.
* **Borradores (Draft PRs):** ¬øTienes trabajo en progreso, quieres ejecutar CI o pedir feedback temprano pero no est√° listo para revisi√≥n formal? Marca tu PR como "Draft". Es una se√±al clara.
* **Commits Limpios y At√≥micos:** El historial de commits *dentro* del PR debe ser legible. Commits peque√±os y con buenos mensajes ([Conventional Commits](./../_fundamentos/convenciones-nombres.md#2-mensajes-de-commit) ayuda mucho). Considera usar `git rebase -i` para limpiar commits de "fixup" o "WIP" *antes* de solicitar la revisi√≥n final.

### El Proceso de Revisi√≥n de C√≥digo (Code Review): M√°s que un "LGTM" üëç

La revisi√≥n de c√≥digo es una de las pr√°cticas de ingenier√≠a m√°s valiosas. ¬°Hag√°mosla bien!

* **Prop√≥sito:** Mejorar calidad, detectar errores, compartir conocimiento, asegurar consistencia, mentorizar. Es una **conversaci√≥n colaborativa**, no un juicio.
* **Para el Revisor:**
    * **S√© Constructivo:** Enf√≥cate en el c√≥digo, no en la persona. Ofrece sugerencias, no solo cr√≠ticas. Explica el *por qu√©* de tus comentarios.
    * **S√© Espec√≠fico:** Indica claramente qu√© l√≠nea o bloque de c√≥digo necesita atenci√≥n y por qu√©. Usa las herramientas de revisi√≥n de GitHub/GitLab (comentarios en l√≠nea, sugerencias de cambio).
    * **Prioriza:** Enf√≥cate primero en los problemas de l√≥gica, seguridad, arquitectura y tests. Los detalles de estilo menores deber√≠an ser manejados por linters/formatters autom√°ticos.
    * **S√© Oportuno:** Intenta revisar los PRs asignados en un tiempo razonable. No bloquees a tus compa√±eros.
    * **Aprueba Claramente:** Cuando est√©s satisfecho, aprueba expl√≠citamente. Si se necesitan cambios, selecciona "Request changes".
* **Para el Autor:**
    * **No lo Tomes Personal:** El feedback es sobre el c√≥digo. Asume buena intenci√≥n.
    * **Responde a los Comentarios:** Aclara dudas, discute alternativas si es necesario, o indica que has aplicado el cambio sugerido. Resuelve las conversaciones.
    * **Actualiza con Agilidad:** Realiza los cambios solicitados y vuelve a solicitar la revisi√≥n.
    * **Agradece:** Una buena revisi√≥n requiere tiempo y esfuerzo.

### Integraci√≥n Continua (CI) y Checks

* **No Negociable:** Cada PR *debe* disparar autom√°ticamente los workflows de CI (linting, tests, build).
* **Checks Obligatorios:** Configura tu repositorio para que **no se pueda fusionar un PR** si los checks de CI fallan o si no tiene las aprobaciones requeridas (protecci√≥n de ramas).

### Fusionando (Merging) PRs

* **Estrategias:**
    * **Merge Commit (Predeterminada a veces):** Crea un commit de merge expl√≠cito. Preserva todo el historial de la rama de feature (puede ser ruidoso).
    * **Squash and Merge:** Combina todos los commits del PR en un √∫nico commit en la rama principal. Mantiene el historial de `main` limpio y lineal. Ideal si los commits intermedios no aportan valor.
    * **Rebase and Merge:** Re-aplica los commits del PR sobre la punta de la rama principal y luego hace un fast-forward. Crea un historial lineal sin commit de merge. Requiere que los autores hagan rebase de sus ramas.
    * *Recomendaci√≥n:* "Squash and Merge" o "Rebase and Merge" suelen preferirse para un historial `main` limpio, pero depende de la pol√≠tica del equipo.
* **Limpieza:** Habilita la opci√≥n para eliminar autom√°ticamente la rama de feature despu√©s de fusionar el PR. ¬°Mant√©n el repo ordenado!

## Ejemplos Pr√°cticos Ê®°ËåÉ

* **Buen T√≠tulo de Issue Bug:** `üêõ Bug: TypeError al procesar pedidos con descuento de cup√≥n inv√°lido`
* **Buena Descripci√≥n de PR:**
    ```markdown
    Closes #456

    **¬øQu√© hace este PR?**

    A√±ade la funcionalidad para que los administradores puedan resetear la contrase√±a de cualquier usuario a trav√©s de la interfaz de administraci√≥n.

    **¬øPor qu√©?**

    Actualmente, solo los propios usuarios pueden resetear su contrase√±a. Los administradores necesitan esta capacidad para casos de soporte donde el usuario no puede acceder a su email.

    **¬øC√≥mo se implement√≥?**

    * Se a√±adi√≥ un nuevo endpoint `POST /api/admin/users/{userId}/reset-password`.
    * Se implement√≥ la l√≥gica en `AdminUserService` asegurando los checks de permisos de administrador.
    * Se a√±adi√≥ un bot√≥n en la vista de detalle de usuario del panel de admin.

    **¬øC√≥mo probarlo?**

    1.  Logu√©ate como administrador.
    2.  Ve al panel de administraci√≥n -> Usuarios -> Ver detalle de un usuario.
    3.  Haz clic en el bot√≥n "Resetear Contrase√±a".
    4.  Verifica que el usuario recibe un email de reseteo (simulado en dev).
    5.  Verifica que un usuario no-admin no puede llamar al endpoint.
    ```
* **Feedback Constructivo vs. Malo:**
    * *Malo:* "Esto est√° mal."
    * *Bueno:* "Creo que este enfoque podr√≠a tener problemas de rendimiento con muchos usuarios concurrentes. ¬øConsideraste usar X patr√≥n aqu√≠ para optimizar las consultas a la BD? Aqu√≠ hay un enlace a un art√≠culo que lo explica: [...]"

## Consejos de Oro del Arquitecto ü¶â‚ú® (Pro Tips)

* **Vinculaci√≥n Autom√°tica:** Usa palabras clave como `closes`, `fixes`, `resolves` seguidas de `#issue_number` en la descripci√≥n de tu PR (ej. `Closes #123`) para que GitHub/GitLab cierren autom√°ticamente la issue cuando el PR se fusione en la rama por defecto. ¬°Magia! ‚ú®
* **Tableros de Proyecto (Projects):** Usa GitHub Projects o GitLab Boards (Kanban/Scrum) para visualizar el flujo de issues y PRs. Arrastra las tarjetas entre columnas (To Do, In Progress, In Review, Done). üìå
* **Bots al Rescate:** Configura bots para ayudar:
    * `Dependabot`: Actualiza dependencias autom√°ticamente (¬°con PRs!).
    * `Stale Bot`: Marca o cierra issues/PRs inactivos. üßü‚Äç‚ôÇÔ∏è
    * Bots de asignaci√≥n de revisores.
* **Comunicaci√≥n Clara:** Si un PR es complejo o necesita discusi√≥n, no dudes en organizar una llamada r√°pida o usar comentarios generales del PR adem√°s de los comentarios en l√≠nea.
* **Establece Expectativas de Tiempo:** Define (como equipo) tiempos de respuesta razonables para la revisi√≥n de PRs para evitar bloqueos.

## ¬°Cuidado! Errores Comunes y C√≥mo Evitarlos üößÔ∏èüòµ (El Lado Oscuro de la Colaboraci√≥n)

* **Issues Telep√°ticas:** Issues con t√≠tulos como "Arreglar bug" y descripci√≥n vac√≠a. ¬øSe supone que adivinemos de qu√© bug hablas? üîÆ‚ùå
    * *Soluci√≥n:* ¬°Usa plantillas! Educa a los usuarios sobre c√≥mo reportar. Pide detalles sin piedad (amablemente).
* **El PR Tsunami:** Un √∫nico PR con cambios masivos que requerir√≠a d√≠as para revisar. El revisor llora por dentro. üò≠üåä
    * *Soluci√≥n:* ¬°Divide y vencer√°s! Divide el trabajo en PRs m√°s peque√±os y enfocados. Usa Draft PRs para feedback temprano en partes grandes.
* **El PR Misterioso:** Un PR sin descripci√≥n ni enlace a issue. ¬øQu√© hace? ¬øPor qu√©? ¬øEs un troyano? ü§îüêé
    * *Soluci√≥n:* ¬°Usa plantillas! Requiere descripciones significativas y enlaces a issues. No fusiones PRs misteriosos.
* **La Revisi√≥n "LGTM" Express:** Aprobar un PR complejo en 30 segundos con un "Looks Good To Me". Derrota el prop√≥sito. (A menos que sea un cambio trivial de typo, ¬°claro!).
    * *Soluci√≥n:* Fomenta una cultura de revisi√≥n real. Establece expectativas (ej. m√≠nimo X minutos por PR complejo, checklist de revisi√≥n).
* **El Revisor "Hater":** Comentarios agresivos, personales o despectivos. Mina la moral y la colaboraci√≥n. üíî
    * *Soluci√≥n:* Establecer un c√≥digo de conducta para revisiones. Enfocarse en el c√≥digo. Fomentar la empat√≠a. Intervenci√≥n del l√≠der t√©cnico si es necesario.
* **El Cementerio de Issues/PRs:** Cientos de items abiertos durante eones, sin actividad. Ruido, desorden, desmotivaci√≥n. üëª
    * *Soluci√≥n:* Triaje regular. Usar Stale Bot. Cerrar lo que ya no es relevante.
* **El Merge Kamikaze:** Fusionar un PR sin esperar a que pasen los tests de CI o sin las aprobaciones necesarias. ¬°Directo a romper `main`! üí£üí•
    * *Soluci√≥n:* ¬°Protecci√≥n de ramas! Configura `main` (o ramas de release) para requerir checks de estado y aprobaciones antes de permitir la fusi√≥n.

## Conclusi√≥n: Colaboraci√≥n Fluida = Desarrollo Feliz üòä

Gestionar Issues y Pull Requests de manera efectiva es una habilidad crucial para cualquier equipo de desarrollo moderno. No se trata solo de herramientas, sino de **comunicaci√≥n, disciplina y respeto mutuo**. Al establecer procesos claros, usar las herramientas de la plataforma de manera inteligente y fomentar una cultura de feedback constructivo, podemos hacer que la colaboraci√≥n sea una fuente de fortaleza y no de frustraci√≥n. ¬°Un flujo de trabajo bien gestionado es la base para entregar software de alta calidad de forma consistente!

---
